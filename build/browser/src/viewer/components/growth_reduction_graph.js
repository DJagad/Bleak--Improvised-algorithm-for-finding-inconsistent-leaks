import * as tslib_1 from "tslib";
import * as React from 'react';
import { scaleLinear as d3ScaleLinear, line as d3Line, select as d3Select, axisBottom, axisLeft, mean, deviation, max, zip as d3Zip, range as d3Range, min } from 'd3';
var BYTES_PER_MB = 1024 * 1024;
function countNonNull(count, a) {
    if (Array.isArray(a)) {
        var aCount = a.reduce(countNonNull, 0);
        if (aCount !== a.length) {
            return count;
        }
        else {
            return count + 1;
        }
    }
    if (a) {
        return count + 1;
    }
    else {
        return count;
    }
}
export function isRankingEvaluationComplete(results) {
    var numLeaks = results.rankingEvaluation.leakShare.length;
    try {
        var zeroLeaksFixed = results.rankingEvaluation.leakShare[0];
        var allLeaksFixed = results.rankingEvaluation.leakShare[numLeaks - 1];
        // Make sure all of the data is there!
        if (!zeroLeaksFixed || !allLeaksFixed || zeroLeaksFixed.reduce(countNonNull, 0) < zeroLeaksFixed.length || allLeaksFixed.reduce(countNonNull, 0) < allLeaksFixed.length) {
            return false;
        }
        return true;
    }
    catch (e) {
        return false;
    }
}
export function averageGrowth(data) {
    // HS => Growth
    var growthData = data.map(function (d, i) { return d.slice(1).map(function (d, j) { return (d.totalSize - data[i][j].totalSize) / BYTES_PER_MB; }); });
    // Growth => Avg Growth
    var avgGrowths = [];
    var iterations = data[0].length;
    var _loop_1 = function (i) {
        avgGrowths.push(mean(growthData.map(function (d) { return d[i]; })));
    };
    for (var i = 0; i < iterations; i++) {
        _loop_1(i);
    }
    var se = deviation(avgGrowths.slice(4)) / Math.sqrt(avgGrowths.length - 4);
    var meanData = mean(avgGrowths.slice(4));
    if (isNaN(se)) {
        return {
            mean: meanData
        };
    }
    return {
        mean: meanData,
        se: se
    };
}
export function averageGrowthReduction(avgGrowthNoFixed, allFixed) {
    var avgGrowthAllFixed = averageGrowth(allFixed);
    var growthReduction = avgGrowthNoFixed.mean - avgGrowthAllFixed.mean;
    var percent = 100 * (growthReduction / avgGrowthNoFixed.mean);
    if (avgGrowthNoFixed.se !== undefined) {
        var growthReductionSe = Math.sqrt(Math.pow(avgGrowthAllFixed.se, 2) + Math.pow(avgGrowthNoFixed.se, 2));
        var percentSe = 100 * Math.abs((avgGrowthNoFixed.mean - avgGrowthAllFixed.mean) / avgGrowthNoFixed.mean) * Math.sqrt(Math.pow(growthReductionSe / growthReduction, 2) + Math.pow(avgGrowthNoFixed.se / avgGrowthNoFixed.mean, 2));
        return {
            mean: growthReduction,
            se: growthReductionSe,
            percent: percent,
            percentSe: percentSe
        };
    }
    else {
        return {
            mean: growthReduction,
            percent: percent
        };
    }
}
// TODO: Support toggling different size stats, not just totalSize.
var GrowthReductionGraph = /** @class */ (function (_super) {
    tslib_1.__extends(GrowthReductionGraph, _super);
    function GrowthReductionGraph() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this._resizeListener = _this._updateGraph.bind(_this);
        return _this;
    }
    GrowthReductionGraph.prototype.componentDidMount = function () {
        this._updateGraph();
        window.addEventListener('resize', this._resizeListener);
    };
    GrowthReductionGraph.prototype.componentDidUpdate = function () {
        this._updateGraph();
    };
    GrowthReductionGraph.prototype.componentWillUnmount = function () {
        window.removeEventListener('resize', this._resizeListener);
    };
    GrowthReductionGraph.prototype._updateGraph = function () {
        if (!this._hasHeapStats()) {
            return;
        }
        var d3div = this.refs['d3_div'];
        if (d3div.childNodes && d3div.childNodes.length > 0) {
            var nodes = [];
            for (var i = 0; i < d3div.childNodes.length; i++) {
                nodes.push(d3div.childNodes[i]);
            }
            nodes.forEach(function (n) { return d3div.removeChild(n); });
        }
        var svg = d3Select(d3div).append("svg");
        var svgStyle = getComputedStyle(svg.node());
        var margins = { left: 65, right: 20, top: 10, bottom: 35 };
        var svgHeight = parseFloat(svgStyle.height);
        var svgWidth = parseFloat(svgStyle.width);
        var radius = 3;
        var tickSize = 6;
        var rankings = ['leakShare', 'retainedSize', 'transitiveClosureSize'];
        var rankEval = this.props.bleakResults.rankingEvaluation;
        // Check if zero point is same or different across rankings.
        // Hack for legacy airbnb data, which has different data for the "no
        // fixes" run across the three metrics (which we leverage to give us
        // tighter error bars on that number / repro the numbers in the paper).
        //
        // On all data produced by BLeak moving forward, the data for the "no fixes"
        // run is the same / shared across metrics -- so we just use the data reported
        // for one metric as the base case.
        var zeroPointData = rankEval.leakShare[0];
        if (zeroPointData[0][0].totalSize !== rankEval.retainedSize[0][0][0].totalSize) {
            // Different data, so can use.
            zeroPointData = [].concat(rankEval.leakShare[0], rankEval.retainedSize[0], rankEval.transitiveClosureSize[0]);
        }
        var zeroPoint = averageGrowth(zeroPointData);
        var state = {
            leakShare: null,
            retainedSize: null,
            transitiveClosureSize: null
        };
        var lines = rankings.map(function (ranking) {
            var line = {
                name: ranking,
                value: rankEval[ranking].map(function (d) { return (zeroPoint.mean - averageGrowth(d).mean) * 1024; })
            };
            if (rankEval[ranking][0].length > 1) {
                line.se = rankEval[ranking].map(function (d) { return (Math.sqrt(Math.pow(zeroPoint.se, 2) + Math.pow(averageGrowth(d).se, 2)) * 1024); });
            }
            return line;
        });
        rankings.forEach(function (ranking) {
            state[ranking] = rankEval[ranking].map(function (d) { return zeroPoint.mean - averageGrowth(d).mean * 1024; });
        });
        var maxHeapSize = 1.02 * max(lines.map(function (l) { return max(l.value.map(function (v, i) { return v + (l.se ? (1.96 * l.se[i]) : 0); })); }));
        var minHeapSize = 0.98 * min(lines.map(function (l) { return min(l.value.map(function (v, i) { return v - (l.se ? (1.96 * l.se[i]) : 0); })); }));
        var plotWidth = svgWidth - margins.left - margins.right;
        var plotHeight = svgHeight - margins.top - margins.bottom;
        var x = d3ScaleLinear()
            .range([0, plotWidth])
            .domain([0, lines[0].value.length - 1]);
        var y = d3ScaleLinear().range([plotHeight, 0])
            .domain([minHeapSize, maxHeapSize]);
        var valueline = d3Line()
            .x(function (d) { return x(d[0]); })
            .y(function (d) { return y(d[1]); });
        var data = lines.map(function (l) {
            return d3Zip(d3Range(0, l.value.length), l.value, l.se ? l.se : d3Range(0, l.value.length));
        });
        var g = svg.append("g").attr('transform', "translate(" + margins.left + ", " + margins.top + ")");
        var plots = g.selectAll("g.plot")
            .data(data)
            .enter()
            .append('g')
            .attr('class', function (d, i) { return "plot plot_" + i; });
        var hasError = !!lines[0].se;
        var self = this;
        function drawPointsAndErrorBars(d, i) {
            // Prevent overlapping points / bars
            var move = i * 5;
            var g = d3Select(this)
                .selectAll('circle')
                .data(d)
                .enter()
                .append('g')
                .attr('class', 'data-point')
                .attr('data-placement', 'left')
                .attr('title', function (d) { return lines[i].name + " " + d[0] + " Leaks Fixed: " + self._presentStat(d[1], 'KB', hasError ? d[2] : undefined); })
                .each(function (_, __, g) {
                for (var i_1 = 0; i_1 < g.length; i_1++) {
                    $(g[i_1]).tooltip();
                }
            });
            g.append('circle')
                .attr('r', radius)
                .attr('cx', function (d) { return x(d[0]) + move; })
                .attr('cy', function (d) { return y(d[1]); });
            if (hasError) {
                // Straight line
                g.append("line")
                    .attr("class", "error-line")
                    .attr("x1", function (d) {
                    return x(d[0]) + move;
                })
                    .attr("y1", function (d) {
                    return y(d[1] + (1.96 * d[2]));
                })
                    .attr("x2", function (d) {
                    return x(d[0]) + move;
                })
                    .attr("y2", function (d) {
                    return y(d[1] - (1.96 * d[2]));
                });
                // Top cap
                g.append("line")
                    .attr("class", "error-cap")
                    .attr("x1", function (d) {
                    return x(d[0]) - 4 + move;
                })
                    .attr("y1", function (d) {
                    return y(d[1] + (1.96 * d[2]));
                })
                    .attr("x2", function (d) {
                    return x(d[0]) + 4 + move;
                })
                    .attr("y2", function (d) {
                    return y(d[1] + (1.96 * d[2]));
                });
                // Bottom cap
                g.append("line")
                    .attr("class", "error-cap")
                    .attr("x1", function (d) {
                    return x(d[0]) - 4 + move;
                })
                    .attr("y1", function (d) {
                    return y(d[1] - (1.96 * d[2]));
                })
                    .attr("x2", function (d) {
                    return x(d[0]) + 4 + move;
                })
                    .attr("y2", function (d) {
                    return y(d[1] - (1.96 * d[2]));
                });
            }
        }
        plots.append('path')
            .attr("class", 'line')
            .attr("d", valueline);
        plots.each(drawPointsAndErrorBars);
        // Add the X Axis
        g.append("g")
            .attr('class', 'xaxis')
            .attr("transform", "translate(0," + plotHeight + ")")
            .call(axisBottom(x).tickSizeOuter(tickSize).tickFormat(function (n) {
            var val = typeof (n) === 'number' ? n : n.valueOf();
            if (Math.floor(val) !== val) {
                // Drop the tick mark.
                return undefined;
            }
            return n;
        }));
        // Add the Y Axis
        g.append("g")
            .attr('class', 'yaxis')
            .call(axisLeft(y).tickSizeOuter(tickSize).tickFormat(function (n) { return n + " KB"; }));
        // Add X axis title
        g.append('text')
            .attr('class', 'xtitle')
            .attr('x', plotWidth >> 1)
            .attr('y', 32) // Approximate height of x axis
            .attr('transform', "translate(0, " + plotHeight + ")")
            .style('text-anchor', 'middle')
            .text('Top Ranked Leak Roots Fixed');
        // Add Y axis title
        g.append('text')
            .attr('class', 'ytitle')
            .attr('x', -1 * (plotHeight >> 1)) // x and y are flipped because of rotation
            .attr('y', -58) // Approximate width of y-axis
            .attr('transform', 'rotate(-90)')
            .style('text-anchor', 'middle')
            .style('alignment-baseline', 'central')
            .text('Growth Reduction');
        if (lines.length > 1) {
            // Put up a legend
            var legend = g.append('g')
                .attr('class', 'legend')
                .attr('transform', "translate(15, 15)");
            var rect = legend.append('rect');
            var legendItems = legend.append('g')
                .attr('class', 'legend-items');
            var liWithData = legendItems.selectAll('text')
                .data(lines)
                .enter();
            liWithData.append('text')
                .attr('x', '1.3em')
                .attr('y', function (l, i) { return i + "em"; })
                .text(function (l) { return l.name; });
            liWithData.append('line')
                .attr('class', function (_, i) { return "plot_" + i; })
                .attr('x1', 0)
                .attr('y1', function (d, i) { return i - 0.3 + "em"; })
                .attr('x2', "1em")
                .attr('y2', function (d, i) { return i - 0.3 + "em"; });
            // x, y, height, width
            var bbox = legendItems.node().getBBox();
            rect.attr('x', bbox.x - 5)
                .attr('y', bbox.y - 5)
                .attr('height', bbox.height + 10)
                .attr('width', bbox.width + 10);
        }
    };
    GrowthReductionGraph.prototype._hasHeapStats = function () {
        return !!this.props.bleakResults.heapStats && this.props.bleakResults.heapStats.length > 0;
    };
    GrowthReductionGraph.prototype._presentStat = function (stat, metric, se) {
        return "" + stat.toFixed(2) + metric + (se ? ", 95% CI [" + (stat - (1.96 * se)).toFixed(2) + ", " + (stat + (1.96 * se)).toFixed(2) + "]" : '');
    };
    GrowthReductionGraph.prototype.render = function () {
        // TODO: Growth reduction.
        return React.createElement("div", null, this._hasHeapStats() ?
            React.createElement("div", { ref: "d3_div", className: "heap-growth-graph" })
            : '');
    };
    return GrowthReductionGraph;
}(React.Component));
export default GrowthReductionGraph;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3Jvd3RoX3JlZHVjdGlvbl9ncmFwaC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy92aWV3ZXIvY29tcG9uZW50cy9ncm93dGhfcmVkdWN0aW9uX2dyYXBoLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxLQUFLLEtBQUssTUFBTSxPQUFPLENBQUM7QUFFL0IsT0FBTyxFQUFDLFdBQVcsSUFBSSxhQUFhLEVBQUUsSUFBSSxJQUFJLE1BQU0sRUFBRSxNQUFNLElBQUksUUFBUSxFQUNoRSxVQUFVLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLEdBQUcsSUFBSSxLQUFLLEVBQUUsS0FBSyxJQUFJLE9BQU8sRUFBRSxHQUFHLEVBQUMsTUFBTSxJQUFJLENBQUM7QUFhbkcsSUFBTSxZQUFZLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQztBQUVqQyxzQkFBeUIsS0FBYSxFQUFFLENBQVU7SUFDaEQsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckIsSUFBTSxNQUFNLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDekMsRUFBRSxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQ3hCLE1BQU0sQ0FBQyxLQUFLLENBQUM7UUFDZixDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDTixNQUFNLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztRQUNuQixDQUFDO0lBQ0gsQ0FBQztJQUNELEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDTixNQUFNLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztJQUNuQixDQUFDO0lBQUMsSUFBSSxDQUFDLENBQUM7UUFDTixNQUFNLENBQUMsS0FBSyxDQUFDO0lB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b250ZW50IjpbImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBCTGVha1Jlc3VsdHMgZnJvbSAnLi4vLi4vbGliL2JsZWFrX3Jlc3VsdHMnO1xuaW1wb3J0IHtzY2FsZUxpbmVhciBhcyBkM1NjYWxlTGluZWFyLCBsaW5lIGFzIGQzTGluZSwgc2VsZWN0IGFzIGQzU2VsZWN0LFxuICAgICAgICBheGlzQm90dG9tLCBheGlzTGVmdCwgbWVhbiwgZGV2aWF0aW9uLCBtYXgsIHppcCBhcyBkM1ppcCwgcmFuZ2UgYXMgZDNSYW5nZSwgbWlufSBmcm9tICdkMyc7XG5pbXBvcnQge1NuYXBzaG90U2l6ZVN1bW1hcnl9IGZyb20gJy4uLy4uL2NvbW1vbi9pbnRlcmZhY2VzJztcblxuaW50ZXJmYWNlIEdyb3d0aFJlZHVjdGlvbkdyYXBoUHJvcHMge1xuICBibGVha1Jlc3VsdHM6IEJMZWFrUmVzdWx0cztcbn1cblxuaW50ZXJmYWNlIExpbmUge1xuICBuYW1lOiBzdHJpbmc7XG4gIHZhbHVlOiBudW1iZXJbXTtcbiAgc2U/OiBudW1iZXJbXTtcbn1cblxuY29uc3QgQllURVNfUEVSX01CID0gMTAyNCAqIDEwMjQ7XG5cbmZ1bmN0aW9uIGNvdW50Tm9uTnVsbDxUPihjb3VudDogbnVtYmVyLCBhOiBUW10gfCBUKTogbnVtYmVyIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoYSkpIHtcbiAgICBjb25zdCBhQ291bnQgPSBhLnJlZHVjZShjb3VudE5vbk51bGwsIDApO1xuICAgIGlmIChhQ291bnQgIT09IGEubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gY291bnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBjb3VudCArIDE7XG4gICAgfVxuICB9XG4gIGlmIChhKSB7XG4gICAgcmV0dXJuIGNvdW50ICsgMTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gY291bnQ7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUmFua2luZ0V2YWx1YXRpb25Db21wbGV0ZShyZXN1bHRzOiBCTGVha1Jlc3VsdHMpOiBib29sZWFuIHtcbiAgY29uc3QgbnVtTGVha3MgPSByZXN1bHRzLnJhbmtpbmdFdmFsdWF0aW9uLmxlYWtTaGFyZS5sZW5ndGg7XG4gIHRyeSB7XG4gICAgY29uc3QgemVyb0xlYWtzRml4ZWQgPSByZXN1bHRzLnJhbmtpbmdFdmFsdWF0aW9uLmxlYWtTaGFyZVswXTtcbiAgICBjb25zdCBhbGxMZWFrc0ZpeGVkID0gcmVzdWx0cy5yYW5raW5nRXZhbHVhdGlvbi5sZWFrU2hhcmVbbnVtTGVha3MgLSAxXTtcbiAgICAvLyBNYWtlIHN1cmUgYWxsIG9mIHRoZSBkYXRhIGlzIHRoZXJlIVxuICAgIGlmICghemVyb0xlYWtzRml4ZWQgfHwgIWFsbExlYWtzRml4ZWQgfHwgemVyb0xlYWtzRml4ZWQucmVkdWNlKGNvdW50Tm9uTnVsbCwgMCkgPCB6ZXJvTGVha3NGaXhlZC5sZW5ndGggfHwgYWxsTGVha3NGaXhlZC5yZWR1Y2UoY291bnROb25OdWxsLCAwKSA8IGFsbExlYWtzRml4ZWQubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhdmVyYWdlR3Jvd3RoKGRhdGE6IFNuYXBzaG90U2l6ZVN1bW1hcnlbXVtdKTogeyBtZWFuOiBudW1iZXIsIHNlPzogbnVtYmVyIH0ge1xuICAvLyBIUyA9PiBHcm93dGhcbiAgY29uc3QgZ3Jvd3RoRGF0YSA9IGRhdGEubWFwKChkLCBpKSA9PiBkLnNsaWNlKDEpLm1hcCgoZCwgaikgPT4gKGQudG90YWxTaXplIC0gZGF0YVtpXVtqXS50b3RhbFNpemUpIC8gQllURVNfUEVSX01CKSk7XG4gIC8vIEdyb3d0aCA9PiBBdmcgR3Jvd3RoXG4gIGxldCBhdmdHcm93dGhzOiBudW1iZXJbXSA9IFtdO1xuICBjb25zdCBpdGVyYXRpb25zID0gZGF0YVswXS5sZW5ndGg7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlcmF0aW9uczsgaSsrKSB7XG4gICAgYXZnR3Jvd3Rocy5wdXNoKG1lYW4oZ3Jvd3RoRGF0YS5tYXAoKGQpID0+IGRbaV0pKSk7XG4gIH1cbiAgY29uc3Qgc2UgPSBkZXZpYXRpb24oYXZnR3Jvd3Rocy5zbGljZSg0KSkgLyBNYXRoLnNxcnQoYXZnR3Jvd3Rocy5sZW5ndGggLSA0KTtcbiAgY29uc3QgbWVhbkRhdGEgPSBtZWFuKGF2Z0dyb3d0aHMuc2xpY2UoNCkpO1xuICBpZiAoaXNOYU4oc2UpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1lYW46IG1lYW5EYXRhXG4gICAgfTtcbiAgfVxuICByZXR1cm4ge1xuICAgIG1lYW46IG1lYW5EYXRhLFxuICAgIHNlXG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhdmVyYWdlR3Jvd3RoUmVkdWN0aW9uKGF2Z0dyb3d0aE5vRml4ZWQ6IHsgbWVhbjogbnVtYmVyLCBzZT86IG51bWJlcn0sIGFsbEZpeGVkOiBTbmFwc2hvdFNpemVTdW1tYXJ5W11bXSk6IHsgbWVhbjogbnVtYmVyLCBzZT86IG51bWJlciwgcGVyY2VudDogbnVtYmVyLCBwZXJjZW50U2U/OiBudW1iZXIgfSB7XG4gIGNvbnN0IGF2Z0dyb3d0aEFsbEZpeGVkID0gYXZlcmFnZUdyb3d0aChhbGxGaXhlZCk7XG4gIGNvbnN0IGdyb3d0aFJlZHVjdGlvbiA9IGF2Z0dyb3d0aE5vRml4ZWQubWVhbiAtIGF2Z0dyb3d0aEFsbEZpeGVkLm1lYW47XG4gIGNvbnN0IHBlcmNlbnQgPSAxMDAgKiAoZ3Jvd3RoUmVkdWN0aW9uIC8gYXZnR3Jvd3RoTm9GaXhlZC5tZWFuKTtcbiAgaWYgKGF2Z0dyb3d0aE5vRml4ZWQuc2UgIT09IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IGdyb3d0aFJlZHVjdGlvblNlID0gTWF0aC5zcXJ0KE1hdGgucG93KGF2Z0dyb3d0aEFsbEZpeGVkLnNlLCAyKSArIE1hdGgucG93KGF2Z0dyb3d0aE5vRml4ZWQuc2UsIDIpKTtcbiAgICBjb25zdCBwZXJjZW50U2UgPSAxMDAgKiBNYXRoLmFicygoYXZnR3Jvd3RoTm9GaXhlZC5tZWFuIC0gYXZnR3Jvd3RoQWxsRml4ZWQubWVhbikgLyBhdmdHcm93dGhOb0ZpeGVkLm1lYW4pICogTWF0aC5zcXJ0KE1hdGgucG93KGdyb3d0aFJlZHVjdGlvblNlIC8gZ3Jvd3RoUmVkdWN0aW9uLCAyKSArIE1hdGgucG93KGF2Z0dyb3d0aE5vRml4ZWQuc2UgLyBhdmdHcm93dGhOb0ZpeGVkLm1lYW4sIDIpKTtcbiAgICByZXR1cm4ge1xuICAgICAgbWVhbjogZ3Jvd3RoUmVkdWN0aW9uLFxuICAgICAgc2U6IGdyb3d0aFJlZHVjdGlvblNlLFxuICAgICAgcGVyY2VudCxcbiAgICAgIHBlcmNlbnRTZVxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1lYW46IGdyb3d0aFJlZHVjdGlvbixcbiAgICAgIHBlcmNlbnRcbiAgICB9O1xuICB9XG59XG5cbi8vIFRPRE86IFN1cHBvcnQgdG9nZ2xpbmcgZGlmZmVyZW50IHNpemUgc3RhdHMsIG5vdCBqdXN0IHRvdGFsU2l6ZS5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdyb3d0aFJlZHVjdGlvbkdyYXBoIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PEdyb3d0aFJlZHVjdGlvbkdyYXBoUHJvcHMsIHt9PiB7XG4gIHByaXZhdGUgX3Jlc2l6ZUxpc3RlbmVyID0gdGhpcy5fdXBkYXRlR3JhcGguYmluZCh0aGlzKTtcblxuICBwdWJsaWMgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5fdXBkYXRlR3JhcGgoKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5fcmVzaXplTGlzdGVuZXIpO1xuICB9XG5cbiAgcHVibGljIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICB0aGlzLl91cGRhdGVHcmFwaCgpO1xuICB9XG5cbiAgcHVibGljIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9yZXNpemVMaXN0ZW5lcik7XG4gIH1cblxuICBwcml2YXRlIF91cGRhdGVHcmFwaCgpIHtcbiAgICBpZiAoIXRoaXMuX2hhc0hlYXBTdGF0cygpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGQzZGl2ID0gdGhpcy5yZWZzWydkM19kaXYnXSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICBpZiAoZDNkaXYuY2hpbGROb2RlcyAmJiBkM2Rpdi5jaGlsZE5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IG5vZGVzOiBOb2RlW10gPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZDNkaXYuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBub2Rlcy5wdXNoKGQzZGl2LmNoaWxkTm9kZXNbaV0pO1xuICAgICAgfVxuICAgICAgbm9kZXMuZm9yRWFjaCgobikgPT4gZDNkaXYucmVtb3ZlQ2hpbGQobikpO1xuICAgIH1cblxuICAgIGNvbnN0IHN2ZyA9IGQzU2VsZWN0KGQzZGl2KS5hcHBlbmQ8U1ZHRWxlbWVudD4oXCJzdmdcIik7XG4gICAgY29uc3Qgc3ZnU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHN2Zy5ub2RlKCkpO1xuICAgIGNvbnN0IG1hcmdpbnMgPSB7bGVmdDogNjUsIHJpZ2h0OiAyMCwgdG9wOiAxMCwgYm90dG9tOiAzNX07XG4gICAgY29uc3Qgc3ZnSGVpZ2h0ID0gcGFyc2VGbG9hdChzdmdTdHlsZS5oZWlnaHQpO1xuICAgIGNvbnN0IHN2Z1dpZHRoID0gcGFyc2VGbG9hdChzdmdTdHlsZS53aWR0aCk7XG4gICAgY29uc3QgcmFkaXVzID0gMztcbiAgICBjb25zdCB0aWNrU2l6ZSA9IDY7XG5cbiAgICBjb25zdCByYW5raW5nczogKCdsZWFrU2hhcmUnIHwgJ3JldGFpbmVkU2l6ZScgfCAndHJhbnNpdGl2ZUNsb3N1cmVTaXplJylbXSA9IFsnbGVha1NoYXJlJywgJ3JldGFpbmVkU2l6ZScsICd0cmFuc2l0aXZlQ2xvc3VyZVNpemUnXVxuICAgIGNvbnN0IHJhbmtFdmFsID0gdGhpcy5wcm9wcy5ibGVha1Jlc3VsdHMucmFua2luZ0V2YWx1YXRpb247XG5cbiAgICAvLyBDaGVjayBpZiB6ZXJvIHBvaW50IGlzIHNhbWUgb3IgZGlmZmVyZW50IGFjcm9zcyByYW5raW5ncy5cbiAgICAvLyBIYWNrIGZvciBsZWdhY3kgYWlyYm5iIGRhdGEsIHdoaWNoIGhhcyBkaWZmZXJlbnQgZGF0YSBmb3IgdGhlIFwibm9cbiAgICAvLyBmaXhlc1wiIHJ1biBhY3Jvc3MgdGhlIHRocmVlIG1ldHJpY3MgKHdoaWNoIHdlIGxldmVyYWdlIHRvIGdpdmUgdXNcbiAgICAvLyB0aWdodGVyIGVycm9yIGJhcnMgb24gdGhhdCBudW1iZXIgLyByZXBybyB0aGUgbnVtYmVycyBpbiB0aGUgcGFwZXIpLlxuICAgIC8vXG4gICAgLy8gT24gYWxsIGRhdGEgcHJvZHVjZWQgYnkgQkxlYWsgbW92aW5nIGZvcndhcmQsIHRoZSBkYXRhIGZvciB0aGUgXCJubyBmaXhlc1wiXG4gICAgLy8gcnVuIGlzIHRoZSBzYW1lIC8gc2hhcmVkIGFjcm9zcyBtZXRyaWNzIC0tIHNvIHdlIGp1c3QgdXNlIHRoZSBkYXRhIHJlcG9ydGVkXG4gICAgLy8gZm9yIG9uZSBtZXRyaWMgYXMgdGhlIGJhc2UgY2FzZS5cbiAgICBsZXQgemVyb1BvaW50RGF0YSA9IHJhbmtFdmFsLmxlYWtTaGFyZVswXTtcbiAgICBpZiAoemVyb1BvaW50RGF0YVswXVswXS50b3RhbFNpemUgIT09IHJhbmtFdmFsLnJldGFpbmVkU2l6ZVswXVswXVswXS50b3RhbFNpemUpIHtcbiAgICAgIC8vIERpZmZlcmVudCBkYXRhLCBzbyBjYW4gdXNlLlxuICAgICAgemVyb1BvaW50RGF0YSA9IFtdLmNvbmNhdChyYW5rRXZhbC5sZWFrU2hhcmVbMF0sIHJhbmtFdmFsLnJldGFpbmVkU2l6ZVswXSwgcmFua0V2YWwudHJhbnNpdGl2ZUNsb3N1cmVTaXplWzBdKTtcbiAgICB9XG4gICAgY29uc3QgemVyb1BvaW50ID0gYXZlcmFnZUdyb3d0aCh6ZXJvUG9pbnREYXRhKTtcbiAgICBjb25zdCBzdGF0ZSA9IHtcbiAgICAgIGxlYWtTaGFyZTogbnVsbCBhcyBudW1iZXJbXSxcbiAgICAgIHJldGFpbmVkU2l6ZTogbnVsbCBhcyBudW1iZXJbXSxcbiAgICAgIHRyYW5zaXRpdmVDbG9zdXJlU2l6ZTogbnVsbCBhcyBudW1iZXJbXVxuICAgIH07XG5cbiAgICBjb25zdCBsaW5lcyA9IHJhbmtpbmdzLm1hcCgocmFua2luZykgPT4ge1xuICAgICAgY29uc3QgbGluZTogTGluZSA9IHtcbiAgICAgICAgbmFtZTogcmFua2luZyxcbiAgICAgICAgdmFsdWU6IHJhbmtFdmFsW3JhbmtpbmddLm1hcCgoZCkgPT4gKHplcm9Qb2ludC5tZWFuIC0gYXZlcmFnZUdyb3d0aChkKS5tZWFuKSAqIDEwMjQpXG4gICAgICB9O1xuICAgICAgaWYgKHJhbmtFdmFsW3JhbmtpbmddWzBdLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgbGluZS5zZSA9IHJhbmtFdmFsW3JhbmtpbmddLm1hcCgoZCkgPT4gKE1hdGguc3FydChNYXRoLnBvdyh6ZXJvUG9pbnQuc2UsIDIpICsgTWF0aC5wb3coYXZlcmFnZUdyb3d0aChkKS5zZSwgMikpICogMTAyNCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGxpbmU7XG4gICAgfSk7XG4gICAgcmFua2luZ3MuZm9yRWFjaCgocmFua2luZykgPT4ge1xuICAgICAgc3RhdGVbcmFua2luZ10gPSAgcmFua0V2YWxbcmFua2luZ10ubWFwKChkKSA9PiB6ZXJvUG9pbnQubWVhbiAtIGF2ZXJhZ2VHcm93dGgoZCkubWVhbiAqIDEwMjQpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgbWF4SGVhcFNpemUgPSAxLjAyICogbWF4KGxpbmVzLm1hcCgobCkgPT4gbWF4KGwudmFsdWUubWFwKCh2LCBpKSA9PiB2ICsgKGwuc2UgPyAoMS45NiAqIGwuc2VbaV0pIDogMCkpKSkpO1xuICAgIGNvbnN0IG1pbkhlYXBTaXplID0gMC45OCAqIG1pbihsaW5lcy5tYXAoKGwpID0+IG1pbihsLnZhbHVlLm1hcCgodiwgaSkgPT4gdiAtIChsLnNlID8gKDEuOTYgKiBsLnNlW2ldKSA6IDApKSkpKTtcblxuICAgIGNvbnN0IHBsb3RXaWR0aCA9IHN2Z1dpZHRoIC0gbWFyZ2lucy5sZWZ0IC0gbWFyZ2lucy5yaWdodDtcbiAgICBjb25zdCBwbG90SGVpZ2h0ID0gc3ZnSGVpZ2h0IC0gbWFyZ2lucy50b3AgLSBtYXJnaW5zLmJvdHRvbTtcblxuICAgIGNvbnN0IHggPSBkM1NjYWxlTGluZWFyKClcbiAgICAgIC5yYW5nZShbMCwgcGxvdFdpZHRoXSlcbiAgICAgIC5kb21haW4oWzAsIGxpbmVzWzBdLnZhbHVlLmxlbmd0aCAtIDFdKTtcbiAgICBjb25zdCB5ID0gZDNTY2FsZUxpbmVhcigpLnJhbmdlKFtwbG90SGVpZ2h0LCAwXSlcbiAgICAgIC5kb21haW4oW21pbkhlYXBTaXplLCBtYXhIZWFwU2l6ZV0pO1xuXG4gICAgY29uc3QgdmFsdWVsaW5lID0gZDNMaW5lPFtudW1iZXIsIG51bWJlciwgbnVtYmVyXT4oKVxuICAgICAgLngoZnVuY3Rpb24oZCkgeyByZXR1cm4geChkWzBdKTsgfSlcbiAgICAgIC55KGZ1bmN0aW9uKGQpIHsgcmV0dXJuIHkoZFsxXSk7IH0pO1xuXG4gICAgY29uc3QgZGF0YSA9IGxpbmVzLm1hcCgobCk6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXVtdID0+XG4gICAgICBkM1ppcChkM1JhbmdlKDAsIGwudmFsdWUubGVuZ3RoKSwgbC52YWx1ZSwgbC5zZSA/IGwuc2UgOiBkM1JhbmdlKDAsIGwudmFsdWUubGVuZ3RoKSkgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXJdW11cbiAgICApO1xuXG4gICAgY29uc3QgZyA9IHN2Zy5hcHBlbmQoXCJnXCIpLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHttYXJnaW5zLmxlZnR9LCAke21hcmdpbnMudG9wfSlgKTtcblxuICAgIGNvbnN0IHBsb3RzID0gZy5zZWxlY3RBbGwoXCJnLnBsb3RcIilcbiAgICAgIC5kYXRhKGRhdGEpXG4gICAgICAuZW50ZXIoKVxuICAgICAgLmFwcGVuZCgnZycpXG4gICAgICAuYXR0cignY2xhc3MnLCAoZCwgaSkgPT4gYHBsb3QgcGxvdF8ke2l9YCk7XG5cbiAgICBjb25zdCBoYXNFcnJvciA9ICEhbGluZXNbMF0uc2U7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgZnVuY3Rpb24gZHJhd1BvaW50c0FuZEVycm9yQmFycyh0aGlzOiBFbGVtZW50LCBkOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl1bXSwgaTogbnVtYmVyKTogdm9pZCB7XG4gICAgICAvLyBQcmV2ZW50IG92ZXJsYXBwaW5nIHBvaW50cyAvIGJhcnNcbiAgICAgIGNvbnN0IG1vdmUgPSBpICogNTtcbiAgICAgIGNvbnN0IGcgPSBkM1NlbGVjdCh0aGlzKVxuICAgICAgICAuc2VsZWN0QWxsKCdjaXJjbGUnKVxuICAgICAgICAuZGF0YShkKVxuICAgICAgICAuZW50ZXIoKVxuICAgICAgICAuYXBwZW5kKCdnJylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2RhdGEtcG9pbnQnKVxuICAgICAgICAuYXR0cignZGF0YS1wbGFjZW1lbnQnLCAnbGVmdCcpXG4gICAgICAgIC5hdHRyKCd0aXRsZScsIChkKSA9PiBgJHtsaW5lc1tpXS5uYW1lfSAke2RbMF19IExlYWtzIEZpeGVkOiAke3NlbGYuX3ByZXNlbnRTdGF0KGRbMV0sICdLQicsIGhhc0Vycm9yID8gZFsyXSA6IHVuZGVmaW5lZCl9YClcbiAgICAgICAgLmVhY2goKF8sIF9fLCBnKSA9PiB7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAkKGdbaV0pLnRvb2x0aXAoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICBnLmFwcGVuZCgnY2lyY2xlJylcbiAgICAgICAgLmF0dHIoJ3InLCByYWRpdXMpXG4gICAgICAgIC5hdHRyKCdjeCcsIChkKSA9PiB4KGRbMF0pICsgbW92ZSlcbiAgICAgICAgLmF0dHIoJ2N5JywgKGQpID0+IHkoZFsxXSkpO1xuXG4gICAgICBpZiAoaGFzRXJyb3IpIHtcbiAgICAgICAgLy8gU3RyYWlnaHQgbGluZVxuICAgICAgICBnLmFwcGVuZChcImxpbmVcIilcbiAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiZXJyb3ItbGluZVwiKVxuICAgICAgICAgIC5hdHRyKFwieDFcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmV0dXJuIHgoZFswXSkgKyBtb3ZlO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmF0dHIoXCJ5MVwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXR1cm4geShkWzFdICsgKDEuOTYgKiBkWzJdKSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuYXR0cihcIngyXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJldHVybiB4KGRbMF0pICsgbW92ZTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5hdHRyKFwieTJcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmV0dXJuIHkoZFsxXSAtICgxLjk2ICogZFsyXSkpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFRvcCBjYXBcbiAgICAgICAgZy5hcHBlbmQoXCJsaW5lXCIpXG4gICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcImVycm9yLWNhcFwiKVxuICAgICAgICAgIC5hdHRyKFwieDFcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmV0dXJuIHgoZFswXSkgLSA0ICsgbW92ZTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5hdHRyKFwieTFcIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgcmV0dXJuIHkoZFsxXSArICgxLjk2ICogZFsyXSkpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmF0dHIoXCJ4MlwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXR1cm4geChkWzBdKSArIDQgKyBtb3ZlO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmF0dHIoXCJ5MlwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXR1cm4geShkWzFdICsgKDEuOTYgKiBkWzJdKSk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQm90dG9tIGNhcFxuICAgICAgICBnLmFwcGVuZChcImxpbmVcIilcbiAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwiZXJyb3ItY2FwXCIpXG4gICAgICAgICAgLmF0dHIoXCJ4MVwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXR1cm4geChkWzBdKSAtIDQgKyBtb3ZlO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmF0dHIoXCJ5MVwiLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICByZXR1cm4geShkWzFdIC0gKDEuOTYgKiBkWzJdKSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuYXR0cihcIngyXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJldHVybiB4KGRbMF0pICsgNCArIG1vdmU7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuYXR0cihcInkyXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgIHJldHVybiB5KGRbMV0gLSAoMS45NiAqIGRbMl0pKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwbG90cy5hcHBlbmQoJ3BhdGgnKVxuICAgICAgLmF0dHIoXCJjbGFzc1wiLCAnbGluZScpXG4gICAgICAuYXR0cihcImRcIiwgdmFsdWVsaW5lKTtcblxuICAgIHBsb3RzLmVhY2goZHJhd1BvaW50c0FuZEVycm9yQmFycyk7XG5cblxuICAgIC8vIEFkZCB0aGUgWCBBeGlzXG4gICAgZy5hcHBlbmQoXCJnXCIpXG4gICAgICAuYXR0cignY2xhc3MnLCAneGF4aXMnKVxuICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgYHRyYW5zbGF0ZSgwLCR7cGxvdEhlaWdodH0pYClcbiAgICAgIC5jYWxsKGF4aXNCb3R0b20oeCkudGlja1NpemVPdXRlcih0aWNrU2l6ZSkudGlja0Zvcm1hdCgobikgPT4ge1xuICAgICAgICBsZXQgdmFsID0gdHlwZW9mKG4pID09PSAnbnVtYmVyJyA/IG4gOiBuLnZhbHVlT2YoKTtcbiAgICAgICAgaWYgKE1hdGguZmxvb3IodmFsKSAhPT0gdmFsKSB7XG4gICAgICAgICAgLy8gRHJvcCB0aGUgdGljayBtYXJrLlxuICAgICAgICAgIHJldHVybiB1bmRlZmluZWQgYXMgYW55O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuO1xuICAgICAgfSkpO1xuXG4gICAgLy8gQWRkIHRoZSBZIEF4aXNcbiAgICBnLmFwcGVuZChcImdcIilcbiAgICAgIC5hdHRyKCdjbGFzcycsICd5YXhpcycpXG4gICAgICAuY2FsbChheGlzTGVmdCh5KS50aWNrU2l6ZU91dGVyKHRpY2tTaXplKS50aWNrRm9ybWF0KChuKSA9PiBgJHtufSBLQmApKTtcblxuICAgIC8vIEFkZCBYIGF4aXMgdGl0bGVcbiAgICBnLmFwcGVuZCgndGV4dCcpXG4gICAgICAuYXR0cignY2xhc3MnLCAneHRpdGxlJylcbiAgICAgIC5hdHRyKCd4JywgcGxvdFdpZHRoID4+IDEpXG4gICAgICAuYXR0cigneScsIDMyKSAvLyBBcHByb3hpbWF0ZSBoZWlnaHQgb2YgeCBheGlzXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgwLCAke3Bsb3RIZWlnaHR9KWApXG4gICAgICAuc3R5bGUoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpXG4gICAgICAudGV4dCgnVG9wIFJhbmtlZCBMZWFrIFJvb3RzIEZpeGVkJyk7XG5cbiAgICAvLyBBZGQgWSBheGlzIHRpdGxlXG4gICAgZy5hcHBlbmQoJ3RleHQnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ3l0aXRsZScpXG4gICAgICAuYXR0cigneCcsIC0xICogKHBsb3RIZWlnaHQgPj4gMSkpIC8vIHggYW5kIHkgYXJlIGZsaXBwZWQgYmVjYXVzZSBvZiByb3RhdGlvblxuICAgICAgLmF0dHIoJ3knLCAtNTgpIC8vIEFwcHJveGltYXRlIHdpZHRoIG9mIHktYXhpc1xuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICdyb3RhdGUoLTkwKScpXG4gICAgICAuc3R5bGUoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpXG4gICAgICAuc3R5bGUoJ2FsaWdubWVudC1iYXNlbGluZScsICdjZW50cmFsJylcbiAgICAgIC50ZXh0KCdHcm93dGggUmVkdWN0aW9uJyk7XG5cblxuICAgIGlmIChsaW5lcy5sZW5ndGggPiAxKSB7XG4gICAgICAvLyBQdXQgdXAgYSBsZWdlbmRcbiAgICAgIGNvbnN0IGxlZ2VuZCA9IGcuYXBwZW5kKCdnJylcbiAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xlZ2VuZCcpXG4gICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKDE1LCAxNSlgKTtcblxuICAgICAgY29uc3QgcmVjdCA9IGxlZ2VuZC5hcHBlbmQoJ3JlY3QnKTtcblxuICAgICAgY29uc3QgbGVnZW5kSXRlbXMgPSBsZWdlbmQuYXBwZW5kPFNWR0dFbGVtZW50PignZycpXG4gICAgICAgIC5hdHRyKCdjbGFzcycsICdsZWdlbmQtaXRlbXMnKTtcblxuICAgICAgY29uc3QgbGlXaXRoRGF0YSA9IGxlZ2VuZEl0ZW1zLnNlbGVjdEFsbCgndGV4dCcpXG4gICAgICAgIC5kYXRhKGxpbmVzKVxuICAgICAgICAuZW50ZXIoKTtcblxuICAgICAgbGlXaXRoRGF0YS5hcHBlbmQoJ3RleHQnKVxuICAgICAgICAuYXR0cigneCcsICcxLjNlbScpXG4gICAgICAgIC5hdHRyKCd5JywgKGwsIGkpID0+IGAke2l9ZW1gKVxuICAgICAgICAudGV4dCgobCkgPT4gbC5uYW1lKTtcblxuICAgICAgbGlXaXRoRGF0YS5hcHBlbmQoJ2xpbmUnKVxuICAgICAgICAuYXR0cignY2xhc3MnLCAoXywgaSkgPT4gYHBsb3RfJHtpfWApXG4gICAgICAgIC5hdHRyKCd4MScsIDApXG4gICAgICAgIC5hdHRyKCd5MScsIChkLCBpKSA9PiBgJHtpIC0gMC4zfWVtYClcbiAgICAgICAgLmF0dHIoJ3gyJywgYDFlbWApXG4gICAgICAgIC5hdHRyKCd5MicsIChkLCBpKSA9PiBgJHtpIC0gMC4zfWVtYCk7XG5cbiAgICAgIC8vIHgsIHksIGhlaWdodCwgd2lkdGhcbiAgICAgIGNvbnN0IGJib3ggPSBsZWdlbmRJdGVtcy5ub2RlKCkuZ2V0QkJveCgpO1xuICAgICAgcmVjdC5hdHRyKCd4JywgYmJveC54IC0gNSlcbiAgICAgICAgLmF0dHIoJ3knLCBiYm94LnkgLSA1KVxuICAgICAgICAuYXR0cignaGVpZ2h0JywgYmJveC5oZWlnaHQgKyAxMClcbiAgICAgICAgLmF0dHIoJ3dpZHRoJywgYmJveC53aWR0aCArIDEwKTtcblxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2hhc0hlYXBTdGF0cygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISF0aGlzLnByb3BzLmJsZWFrUmVzdWx0cy5oZWFwU3RhdHMgJiYgdGhpcy5wcm9wcy5ibGVha1Jlc3VsdHMuaGVhcFN0YXRzLmxlbmd0aCA+IDA7XG4gIH1cblxuICBwcml2YXRlIF9wcmVzZW50U3RhdChzdGF0OiBudW1iZXIsIG1ldHJpYzogc3RyaW5nLCBzZT86IG51bWJlcikge1xuICAgIHJldHVybiBgJHtzdGF0LnRvRml4ZWQoMil9JHttZXRyaWN9JHtzZSA/IGAsIDk1JSBDSSBbJHsoc3RhdCAtICgxLjk2ICogc2UpKS50b0ZpeGVkKDIpfSwgJHsoc3RhdCArICgxLjk2ICogc2UpKS50b0ZpeGVkKDIpfV1gIDogJyd9YFxuICB9XG5cbiAgcHVibGljIHJlbmRlcigpIHtcbiAgICAvLyBUT0RPOiBHcm93dGggcmVkdWN0aW9uLlxuICAgIHJldHVybiA8ZGl2PlxuICAgICAge3RoaXMuX2hhc0hlYXBTdGF0cygpID9cbiAgICAgICAgPGRpdiByZWY9XCJkM19kaXZcIiBjbGFzc05hbWU9XCJoZWFwLWdyb3d0aC1ncmFwaFwiPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDogJyd9XG4gICAgPC9kaXY+O1xuICB9XG59XG4iXX0=